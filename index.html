<!doctype html>
<html>
  <head>
    <title>Fits by lizzb</title>

<script src="data.js"></script>
<script src="Pieces.js"></script>
<link rel="stylesheet" href="style.css">

<script>

window.addEventListener('load', function(e) {
  document.querySelector('#test').innerHTML = 'fitris';

  /*for (var i = Things.length - 1; i >= 0; i--) {
    Things[i]
  };
}, false);*/
/*
var pieces = document.querySelector('#game-pieces');
pieces.innerHTML += "";

for (var i = 0; i < pieceNames.length; i++) {
  //polyonimos[i]
}*/
});




// ---------------------------------------------
// STILL USING THIS, NOT YET ON PROTOTYPES

var currentOrientationIndex = 0; //"N";
//var currentOrientation = orientations[currentOrientationIndex]; 
var currentPieceName = "v3"; 

//createPentomino('x5')

function createPentomino(pieceName) {

  // rowlabels are only specific to the ids for the PIECES not the board!
  // the board is 6 wide (goes to f), not 5
  var rowLabels = ['a', 'b', 'c', 'd', 'e'];

  currentPieceName = pieceName;
  //var pieceName = currentPieceName;
  //var currentOrientationIndex = 0;
  var pieceOrientation = orientations[currentOrientationIndex]; 
  
  var defaultPieceInfo = emptyPiece;
  var pieceLayout = North; // array of 25 indices, order to read the info
  
  switch (pieceName) {
  case "v3": defaultPieceInfo = v3; break;
  case "v5": defaultPieceInfo = v5; break;
  case "l4": defaultPieceInfo = l4; break;
  case "l5": defaultPieceInfo = l5; break;
  case "z4": defaultPieceInfo = z4; break;
  case "z5": defaultPieceInfo = z5; break;
  case "t4": defaultPieceInfo = t4; break;
  case "t5": defaultPieceInfo = t5; break;
  case "x5": defaultPieceInfo = x5; break;
  case "y5": defaultPieceInfo = y5; break;
  case "w5": defaultPieceInfo = w5; break;
  case "f5": defaultPieceInfo = f5; break;
  case "p5": defaultPieceInfo = p5; break;
  case "o4": defaultPieceInfo = o4; break;
      
  case "n5": defaultPieceInfo = n5; break;
  case "i5": defaultPieceInfo = i5; break;
  case "i4": defaultPieceInfo = i4; break;
  case "i3": defaultPieceInfo = i3; break;
  case "i2": defaultPieceInfo = i2; break;
  case "i1": defaultPieceInfo = i1; break;
  default: break;
}
  
  // little janky, turns index of orientation into number back into actual layout (25 indices rearranged to read in order to match orientation)
    switch (pieceOrientation) {
  case "N": pieceLayout = North; break;
  case "E": pieceLayout = East; break;
  case "S": pieceLayout = South; break;
  case "W": pieceLayout = West; break;
  case "rN": pieceLayout = rNorth; break;
  case "rE": pieceLayout = rEast; break;
  case "rS": pieceLayout = rSouth; break;
  case "rW": pieceLayout = rWest; break;
  default: break;
}


  var pieceDiv = document.createElement("DIV");
  pieceDiv.className = "piece";
  for (var i=0; i<25; i++) { 
    var unit = document.createElement("DIV");
      unit.id = rowLabels[i%5] + Math.floor(i/5 + 1);
      unit.appendChild(document.createTextNode(unit.id)); //...........

    if(defaultPieceInfo[pieceLayout[i]])
      unit.className = "filled";
    pieceDiv.appendChild(unit);
    if ((i+1) % 5 === 0)
      pieceDiv.appendChild(document.createElement("BR"));
  }
  pieceDiv.appendChild(document.createElement("BR"));
  document.getElementById("game-pieces").appendChild(pieceDiv);
}

// -----------------------------------------------------------
// ROTATE LEFT (counterclockwise)
// -----------------------------------------------------------
function rotateLeft() {
  var oldIndex = currentOrientationIndex; //this.orientationIdx;
  currentOrientationIndex--; //this.orientationIdx--;

  if( (oldIndex < 4 && currentOrientationIndex < 0) || (oldIndex >= 4 && currentOrientationIndex < 4) )
    currentOrientationIndex+=4;

  var debug = orientations[oldIndex] + "("+ oldIndex + ")" +
              " --> rotate LEFT --> " + 
              orientations[currentOrientationIndex] + "(" + currentOrientationIndex + ")";
  console.log(debug);
  
  // REDRAW MOST RECENTLY SELECTED PIECE
  createPentomino(currentPieceName);
}


// -----------------------------------------------------------
// ROTATE RIGHT (clockwise)
// -----------------------------------------------------------
function rotateRight() {
  var oldIndex = currentOrientationIndex; //this.orientationIdx;
  currentOrientationIndex = ( currentOrientationIndex + 1 ) % 4;
  //this.orientationIdx = (this.orientationIdx + 1) % 4; 
  
  if(oldIndex >= 4) currentOrientationIndex+=4; // rN rE rS rW need adjustment, NESW dont
  
  var debug = orientations[oldIndex] + "("+ oldIndex + ")" +
              " --> rotate RIGHT --> " +
              orientations[currentOrientationIndex] + "(" + currentOrientationIndex + ")";
  console.log(debug);
  
  // REDRAW MOST RECENTLY SELECTED PIECE
  createPentomino(currentPieceName);
}




//
// 1 --> 7, 7 --> 1, 3 --> 5, 5 --> 3
// -----------------------------------------------------------
// FLIP VERTICAL 
// -----------------------------------------------------------
function flipVertical() {
  var oldIndex = currentOrientationIndex; //this.orientationIdx;
  
  // N <--> rN, S <--> rS
  // E <--> rW, W <--> rE
  //  N  E  S  W
  //  ↕  ↕  ↕  ↕
  // rN rW rS rE
  
  // N S rN rS (even indices)
  if(currentOrientationIndex % 2 === 0)
      currentOrientationIndex = (currentOrientationIndex + 4) % 8;
    
  // E rW W rE (odd indices)
  else
      currentOrientationIndex = 8 - currentOrientationIndex;
  
  var debug = orientations[oldIndex] + "("+ oldIndex + ")" +
              " --> flip VERTICAL --> " +
              orientations[currentOrientationIndex] + "(" + currentOrientationIndex + ")";
  console.log(debug);
  
  // REDRAW MOST RECENTLY SELECTED PIECE
  createPentomino(currentPieceName);
}



//
// 0 --> 6, 6 --> 0, 2 --> 4, 4 --> 2
//
// -----------------------------------------------------------
// FLIP HORIZONTAL 
// -----------------------------------------------------------
function flipHorizontal() {
  var oldIndex = currentOrientationIndex; //this.orientationIdx;
  
  // N <--> rS, S <--> rN
  // E <--> rE, W <--> rW
  //  N  E  S  W
  //  ↕  ↕  ↕  ↕
  // rS rE rN rW
  
    // N S rN rS (even indices)
  if(currentOrientationIndex % 2 === 0)
      currentOrientationIndex = 6 - currentOrientationIndex;
      
    
  // E rW W rE (odd indices)
  else
      currentOrientationIndex = (currentOrientationIndex + 4) % 8;
  
  var debug = orientations[oldIndex] + "("+ oldIndex + ")" +
              " --> flip HORIZONTAL --> " +
              orientations[currentOrientationIndex] + "(" + currentOrientationIndex + ")";
  console.log(debug);
  
  // REDRAW MOST RECENTLY SELECTED PIECE
  createPentomino(currentPieceName);
}



</script>


</head>

<body>
<header>

<h1 id="test"></h1>
  
  
  <a class="button" onclick="rotateRight()"><strong>&#8635;</strong> Rotate Right CW </a>
  <a class="button" onclick="rotateLeft()"><strong>&#8634;</strong> Rotate Left CCW </a>
  <a class="button" onclick="flipVertical()"><strong>&#8597;</strong> Flip Vertical </a>
  <a class="button" onclick="flipHorizontal()"><strong>&#8596;</strong> Flip Horizontal </a>

</header>

<section>

<div id="game-pieces"></div>


  

  <br><br>
  
<!--button onclick="createDynamicPentomino('f5')"> Make dynamic f </button>
<button onclick="createDynamicPentomino('p5')"> Make dynamic p </button>
<button onclick="createDynamicPentomino('o4')"> Make dynamic o </button>
  
  <br><br-->  
  
  
  <div id="dynamic-pentomino"></div>
  
  <hr>
  
  <h3> Create pentominos </h3>

<button onclick="createPentomino('x5')"> Make x </button>
<button onclick="createPentomino('y5')"> Make y </button>
<button onclick="createPentomino('w5')"> Make w </button>
<button onclick="createPentomino('f5')"> Make f </button>
<button onclick="createPentomino('p5')"> Make p </button>
<button onclick="createPentomino('o4')"> Make o </button>

<button onclick="createPentomino('v3')"> Make v3 </button>
<button onclick="createPentomino('v5')"> Make v5 </button>
<button onclick="createPentomino('l4')"> Make l4 </button>
<button onclick="createPentomino('l5')"> Make l5 </button>
<button onclick="createPentomino('z4')"> Make z4 </button>
<button onclick="createPentomino('z5')"> Make z5 </button>  
<button onclick="createPentomino('t4')"> Make t4 </button>
<button onclick="createPentomino('t5')"> Make t5 </button>

  
  <br><br>
  
<div id="pentomino"></div>
  

  
  

</section>



		

<!--&#9633;
  &#11036;

  <pre>
  []  
  []  
  []  
</pre>
  
<pre>
[][]  
  []  
  [][]
</pre>
  
<pre>
[][][]  
  []  
  []  
</pre>
  
<pre>   
[][][]
  []  
</pre>
  
<pre>   
[][]  
  [][]  
</pre
↻ Rotate Right CW ↷ &#8631;
↺ Rotate Left CCW ↶ &#8630; anticlockwise Top Semicircle Arrow looks good universalia
-->
    
  </body>
</html>